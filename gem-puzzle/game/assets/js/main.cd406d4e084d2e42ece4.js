(()=>{"use strict";var e={2150:(e,t,n)=>{function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t,n,s){var a,l=null;try{l=document.createElement(e)}catch(e){throw new Error("Unable to create element")}t&&(a=l.classList).add.apply(a,r(t.split(" ")));n&&Array.isArray(n)?n.forEach((function(e){return e&&l.append(e)})):n&&"object"===o(n)?l.append(n):n&&"string"==typeof n&&(l.innerHTML=n),s&&s.append(l);for(var u=arguments.length,c=new Array(u>4?u-4:0),d=4;d<u;d++)c[d-4]=arguments[d];return c.length&&c.forEach((function(e){var t=i(e,2),n=t[0],o=t[1];""===o&&l.setAttribute(n,""),n.match(/value|id|placeholder|cols|rows|autocorrect|spellcheck|src|selected|disabled|draggable|alt/)?l.setAttribute(n,o):l.dataset[n]=o})),l}function u(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return JSON.parse(window.localStorage.getItem(e)||t)}const d=n.p+"assets/sounds/7f16b300e840f1e84fbb7a25f2583563.mp3";function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e){var t=m(Array(e).keys()).map((function(e){return e+1})).sort((function(){return Math.random()-.5}));t.push(0);for(var n=0,i=0;i<e+1;i+=1)if(t[i])for(var o=0;o<i;o+=1)t[o]>t[i]&&(n+=1);for(var r=0;r<e+1;r+=1)0===t[r]&&(n+=Math.floor(1+r/Math.sqrt(e+1)));return(e+1)%2==0&&n%2==0||(e+1)%2!=0&&n%2!=0?t:h(e)}function p(e,t,n,i,o){var r=e;if("images"===n){var s=Math.sqrt(i+1);r.style.backgroundImage="url(assets/img/background/".concat(o,".jpg)"),r.style.backgroundRepiat="no-repeat",r.style.backgroundSize="".concat(100*s,"%");var a=t-1,l=100/(s-1);r.style.backgroundPosition="".concat(a%s*l,"% ").concat(Math.floor(a/s)*l,"%")}else r.style.background="#ffecd2";return r}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new(function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"drag",(function(e,t){var i=n.cells[t];if(Math.abs(n.empty.left-i.left)+Math.abs(n.empty.top-i.top)<=1){i.element.classList.add("index"),i.element.style.transition="0s",n.field.onmouseleave=function(){i.element.style.transition=".3s",setTimeout((function(){i.element.classList.remove("index")}),300),n.move(t)};n.field.onmousemove=function(t){!function(e,t){i.element.style.left="".concat(e,"%"),i.element.style.top="".concat(t,"%")}((t.pageX-n.field.offsetLeft-e.offsetX-n.field.clientLeft-e.target.clientLeft)/n.field.clientWidth*100,(t.pageY-n.field.offsetTop-e.offsetY-n.field.clientTop-e.target.clientTop)/n.field.clientHeight*100)},n.field.onmouseup=function(){i.element.style.transition=".3s",setTimeout((function(){i.element.classList.remove("index")}),300),n.field.onmousemove=null,n.field.onmouseup=null}}})),g(this,"move",(function(e){var t=n.cells[e];if(!(Math.abs(n.empty.left-t.left)+Math.abs(n.empty.top-t.top)>1)){t.element.style.left="".concat(n.empty.left*n.cellSize,"%"),t.element.style.top="".concat(n.empty.top*n.cellSize,"%");var i=[n.empty.left,n.empty.top],o=i[0],r=i[1];n.empty.left=t.left,n.empty.top=t.top,t.left=o,t.top=r,n.field.onmouseleave=null,n.field.onmousemove=null,n.field.onmouseup=null,n.soundOn&&(n.soundContainer.children[0].play(),n.soundContainer.children[0].currentTime=0);var s=n.cells.every((function(e){return e.value===e.top*Math.sqrt(n.fieldSize+1)+e.left+1}));if(n.movesCounter+=1,n.displayMoves.innerText="".concat(n.movesCounter," moves"),s){if("images"===n.gameType){var a=l("img","finished-image finished-image-hide",null,null,["src","assets/img/background/".concat(n.randomImage,".jpg")],["alt","image"]);n.field.prepend(a),setTimeout((function(){a.classList.remove("finished-image-hide")}),50)}n.pauseButton.setAttribute("disabled","disabled"),n.timerOn=!1,n.timer(),n.finishMenu.classList.add("menu-hidden"),n.field.prepend(n.finishMenu),setTimeout((function(){n.finishMenu.classList.remove("menu-hidden")}),50),n.finishMenu.children[1].innerText="Time: ".concat(n.displayTime.children[1].innerText,", moves: ").concat(n.movesCounter),n.score.push({game:"".concat(n.gameType," ").concat(Math.sqrt(+n.selectList.value+1),"x").concat(Math.sqrt(+n.selectList.value+1)),displayTime:n.displayTime.children[1].innerText,moves:n.movesCounter,score:(60*n.min+n.sec)*n.movesCounter}),u("score",n.score),n.finishMenu.children[2].onclick=function(){n.pauseButton.removeAttribute("disabled"),n.finishMenu.remove(),n.clear(),n.generateField()}}}})),this.field=l("div","field"),this.startMenu=l("div","menu",l("div","start-menu-button","START")),this.finishMenu=l("div","menu",[l("div","finish-menu-header","VICTORY"),l("div","finish-menu-item"),l("div","finish-menu-button","OK")]),this.scoreMenu=l("div","score-menu",[l("div","score-menu-header","Score"),l("div","score-menu-container"),l("div","score-menu-button","Ok")]),this.pauseMenu=l("div","menu",l("div","pause-menu-header","Game Paused")),this.soundContainer=l("div","sound-container",[l("audio",null,null,null,["src",d])]),this.pauseButton=l("button","common-button","Pause"),this.resetButton=l("button","common-button","Reset"),this.soundButton=l("button","common-button","Off sound"),this.saveButton=l("button","common-button","Save"),this.loadButton=l("button","common-button","Load"),this.scoreButton=l("button","common-button","Score"),this.displayTime=l("div","timer",[l("span","timer-text","Time: "),l("span","timer-digits","00:00")]),this.displayMoves=l("div","moves","0 moves"),this.selectList=l("select","select-list",[l("option",null,"3x3",null,["value","8"]),l("option",null,"4x4",null,["value","15"],["selected","selected"]),l("option",null,"5x5",null,["value","24"]),l("option",null,"6x6",null,["value","35"]),l("option",null,"7x7",null,["value","48"]),l("option",null,"8x8",null,["value","63"])]),this.selectGameType=l("select","select-list",[l("option",null,"Images",null,["value","images"],["selected","selected"]),l("option",null,"Digits",null,["value","digits"])]),this.fieldSize=t,this.cellSize=100/Math.sqrt(this.fieldSize+1),this.empty={value:0,left:Math.sqrt(this.fieldSize+1)-1,top:Math.sqrt(this.fieldSize+1)-1},this.movesCounter=0,this.cells=[],this.min=0,this.sec=0,this.timerOn=!1,this.soundOn=!0,this.randomImage=null,this.score=c("score")||[],this.gameType="images"}var t,n,i;return t=e,(n=[{key:"generateField",value:function(){var e=this;this.numbers=h(this.fieldSize),this.field.innerHTML="",this.randomImage=Math.floor(150*Math.random())+1;for(var t=function(t){var n=e.numbers[t],i=l("div","cell unselectable","".concat("images"===e.gameType?"":n));i.style.height="".concat(100/Math.sqrt(e.fieldSize+1),"%"),i.style.width="".concat(100/Math.sqrt(e.fieldSize+1),"%"),p(i,n,e.gameType,e.fieldSize,e.randomImage);var o=t%Math.sqrt(e.fieldSize+1),r=(t-o)/Math.sqrt(e.fieldSize+1);e.cells.push({value:n,left:o,top:r,element:i}),i.style.left="".concat(o*e.cellSize,"%"),i.style.top="".concat(r*e.cellSize,"%"),i.classList.add("cell-hidden");var s=function(){e.field.append(i),setInterval((function(){i.classList.remove("cell-hidden")}),70),i.onclick=function(){e.move(t)},i.onmousedown=function(n){e.drag(n,t)}};"images"===e.gameType?l("img",null,null,null,["src","assets/img/background/".concat(e.randomImage,".jpg")]).onload=function(){s()}:s()},n=0;n<=this.fieldSize-1;n+=1)t(n);return this.field.prepend(this.startMenu),this.pauseButton.setAttribute("disabled","disabled"),this.startMenu.children[0].onclick=function(){e.timerOn=!0,e.timer(),e.startMenu.classList.add("menu-hidden"),setTimeout((function(){e.startMenu.remove(),e.startMenu.classList.remove("menu-hidden")}),500),e.pauseButton.removeAttribute("disabled")},this}},{key:"timer",value:function(){var e=this;this.timerOn?(clearInterval(this.timerInterval),this.timerInterval=setInterval((function(){e.sec+=1,e.sec>=60&&(e.min+=1,e.sec-=60),e.min>=60&&(e.min-=60),e.sec<10?e.min<10?e.displayTime.children[1].innerText="0".concat(e.min,":0").concat(e.sec):e.displayTime.children[1].innerText="".concat(e.min,":0").concat(e.sec):e.min<10?e.displayTime.children[1].innerText="0".concat(e.min,":").concat(e.sec):e.displayTime.children[1].innerText="".concat(e.min,":").concat(e.sec)}),1e3)):clearInterval(this.timerInterval)}},{key:"clear",value:function(){this.min=0,this.sec=0,this.movesCounter=0,this.displayMoves.innerText="0 moves",this.displayTime.children[1].innerText="00:00",this.timerOn=!1,this.timer(),this.empty={value:0,left:Math.sqrt(this.fieldSize+1)-1,top:Math.sqrt(this.fieldSize+1)-1},this.cells=[],this.pauseButton.innerText="Pause",this.cellSize=100/Math.sqrt(this.fieldSize+1)}},{key:"init",value:function(){var e=this;this.generateField(this.fieldSize),this.pauseButton.onclick=function(){e.timerOn?(e.timerOn=!1,e.pauseButton.innerText="Play!",e.pauseMenu.classList.add("menu-hidden"),e.field.prepend(e.pauseMenu),setTimeout((function(){e.pauseMenu.classList.remove("menu-hidden")}),50)):(e.timerOn=!0,e.pauseButton.innerText="Pause",e.pauseMenu.classList.add("menu-hidden"),setTimeout((function(){e.pauseMenu.classList.remove("menu-hidden"),e.pauseMenu.remove()}),500)),e.timer()},this.resetButton.onclick=function(){e.clear(),e.generateField(),e.timer()},this.soundButton.onclick=function(){e.soundOn?(e.soundOn=!1,e.soundButton.innerText="On sound"):(e.soundOn=!0,e.soundButton.innerText="Off sound")},this.selectList.onchange=function(){e.fieldSize=+e.selectList.value,e.clear(),e.generateField()},this.selectGameType.onchange=function(){e.gameType=e.selectGameType.value,e.clear(),e.generateField()},this.saveButton.onclick=function(){u("empty",e.empty);var t=[];e.cells.forEach((function(e){var n=e.value,i=e.left,o=e.top;return t.push({value:n,left:i,top:o})})),u("cells",t),u("timeAndMoves",[e.min,e.sec,e.movesCounter]),u("fieldSize",e.fieldSize),u("randomImage",e.randomImage),u("gameType",e.gameType),e.loadButton.removeAttribute("disabled")},c("cells")?this.loadButton.removeAttribute("disabled"):this.loadButton.setAttribute("disabled","disabled"),this.loadButton.onclick=function(){var t=c("cells");if(t){e.empty=c("empty"),e.fieldSize=c("fieldSize"),e.cellSize=100/Math.sqrt(e.fieldSize+1),e.randomImage=c("randomImage"),e.gameType=c("gameType");var n=[];t.forEach((function(t,i){var o=l("div","cell unselectable","".concat("images"===e.gameType?"":t.value));o.style.left="".concat(t.left*e.cellSize,"%"),o.style.top="".concat(t.top*e.cellSize,"%"),o.style.height="".concat(100/Math.sqrt(e.fieldSize+1),"%"),o.style.width="".concat(100/Math.sqrt(e.fieldSize+1),"%"),p(o,t.value,e.gameType,e.fieldSize,e.randomImage),o.onclick=function(){e.move(i)},o.onmousedown=function(t){e.drag(t,i)},n.push({value:t.value,left:t.left,top:t.top,element:o})})),e.cells=n,e.field.innerHTML="";var i=function(){e.cells.forEach((function(t){var n=t.element;n.classList.add("cell-hidden"),e.field.append(n),setTimeout((function(){n.classList.remove("cell-hidden")}),70)}))};"images"===e.gameType?l("img",null,null,null,["src","assets/img/background/".concat(e.randomImage,".jpg")]).onload=function(){i()}:i();var o=v(c("timeAndMoves"),3),r=o[0],s=o[1],a=o[2];e.min=r,e.sec=s,e.timerOn=!0,e.timer(),e.pauseButton.innerText="Pause",e.pauseButton.removeAttribute("disabled"),e.movesCounter=a,e.displayMoves.innerText="".concat(a," moves"),e.selectList.value=e.fieldSize,e.selectGameType.value=e.gameType}},this.scoreButton.onclick=function(){e.scoreMenu.children[1].innerHTML="";var t=c("score");t?(t.sort((function(e,t){return e.score>t.score?1:-1})),t.splice(10),t.forEach((function(t){var n=t.game,i=t.displayTime,o=t.moves,r=l("div","score-item","<b>Game:</b> ".concat(n,", <b>time:</b> ").concat(i,", <b>moves:</b> ").concat(o));e.scoreMenu.children[1].append(r)}))):e.scoreMenu.children[1].innerText="No winners yet :(",e.scoreMenu.classList.add("menu-hidden"),e.field.prepend(e.scoreMenu),setTimeout((function(){e.scoreMenu.classList.remove("menu-hidden")}),50),e.scoreMenu.children[2].onclick=function(){e.scoreMenu.classList.add("menu-hidden"),setTimeout((function(){e.scoreMenu.remove(),e.scoreMenu.classList.remove("menu-hidden")}),500)}},this.container=l("div","gem-puzzle",[l("div","header","Gem-puzzle"),l("div","info",[this.displayTime,this.displayMoves]),this.field,l("div","controls",[l("div","controls-line-buttons",[this.pauseButton,this.resetButton,this.soundButton,this.saveButton,this.loadButton,this.scoreButton]),l("div","controls-line-list",[this.selectGameType,this.selectList])]),this.soundContainer]),document.body.append(this.container)}}])&&b(t.prototype,n),i&&b(t,i),e}())(15).init()}},t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.m=e,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../../"})(),(()=>{var e={179:0},t=[[6981,981],[2150,981]],i=()=>{};function o(){for(var i,o=0;o<t.length;o++){for(var r=t[o],s=!0,a=1;a<r.length;a++){var l=r[a];0!==e[l]&&(s=!1)}s&&(t.splice(o--,1),i=n(n.s=r[0]))}return 0===t.length&&(n.x(),n.x=()=>{}),i}n.x=()=>{n.x=()=>{},s=s.slice();for(var e=0;e<s.length;e++)r(s[e]);return(i=o)()};var r=o=>{for(var r,s,[l,u,c,d]=o,m=0,f=[];m<l.length;m++)s=l[m],n.o(e,s)&&e[s]&&f.push(e[s][0]),e[s]=0;for(r in u)n.o(u,r)&&(n.m[r]=u[r]);for(c&&c(n),a(o);f.length;)f.shift()();return d&&t.push.apply(t,d),i()},s=self.webpackChunkgem_puzzle=self.webpackChunkgem_puzzle||[],a=s.push.bind(s);s.push=r})(),n.x()})();